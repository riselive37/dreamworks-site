<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ブログ詳細</title>
  <style>
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;line-height:1.7;margin:0;padding:24px;background:#fff;}
    .wrap{max-width:840px;margin:0 auto;}
    a{color:#2563eb;text-decoration:none} a:hover{text-decoration:underline}
    .meta{color:#64748b;margin:.5rem 0 1.25rem}
    img{max-width:100%;height:auto;border-radius:8px}
    .content{margin-top:1.25rem}
    .back{display:inline-block;margin-top:2rem}
  </style>
</head>
<body>
  <div class="wrap">
    <a class="back" href="blog.html">← 一覧へ戻る</a>
    <h1 id="title">読み込み中…</h1>
    <div class="meta" id="date"></div>
    <div id="eyecatch"></div>
    <div class="content" id="content"></div>
  </div>

<script>
const SERVICE_DOMAIN = "dreamworks";
const ENDPOINT       = "blogs";
const API_KEY        = "hirIBslQWigXATRGfz9aAwwH1RVtLxGNhcx4";

const params = new URL(location.href).searchParams;
const id = params.get("id");

if (!id) {
  document.getElementById('title').textContent = "記事IDが指定されていません。";
} else {
  fetch(`https://${SERVICE_DOMAIN}.microcms.io/api/v1/${ENDPOINT}/${id}`, {
    headers: { "X-MICROCMS-API-KEY": API_KEY }
  })
  .then(r => r.ok ? r.json() : Promise.reject(r))
  .then(post => {
    // タイトル
    document.getElementById('title').textContent = post.title || "(無題)";

    // 日付
    const d = new Date(post.publishedAt || post.createdAt);
    const pad = n => String(n).padStart(2,'0');
    document.getElementById('date').textContent =
      `${d.getFullYear()}.${pad(d.getMonth()+1)}.${pad(d.getDate())}`;

    // アイキャッチ
    if (post.eyecatch?.url) {
      document.getElementById('eyecatch').innerHTML =
        `<img src="${post.eyecatch.url}" alt="">`;
    }

    // 本文（フィールド名が template により異なるので両対応）
    const html = post.content || post.body || "";
    document.getElementById('content').innerHTML = html;
  })
  .catch(() => {
    document.getElementById('title').textContent = "記事を取得できませんでした。";
  });
}
</script>
</body>
</html>